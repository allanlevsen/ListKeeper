<div class="card" [ngStyle]="{'background-color': note.color}">
  
  <!-- The overlay is a direct child of the card. It contains an SVG. -->
  @if (note.isCompleted) {
    <div class="completed-overlay">
      <!-- 
        This is an inline SVG. It's just code, not a font, 
        so it will always render. 
      -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor">
        <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>
      </svg>
    </div>
  }

  <!-- The card-body is a sibling to the overlay -->
  <div class="card-body">
    <h5 class="card-title">{{ note.title }}</h5>
    
    <p class="card-subtitle mb-2 text-muted small">
      Due: {{ note.dueDate | date:'fullDate' }}
    </p>

    <p class="card-text mt-3">{{ note.content }}</p>
    
    <div class="icon-bar-container">
      <div class="icon-bar">
        <i class="bi bi-star disabled-icon" 
           title="This function is not implemented"
           data-bs-toggle="tooltip" 
           data-bs-placement="top"></i>
        <i class="bi bi-heart disabled-icon" 
           title="This function is not implemented"
           data-bs-toggle="tooltip" 
           data-bs-placement="top"></i>
        <i class="bi bi-pencil" (click)="onEdit()"></i>
        <i class="bi bi-trash" (click)="onDelete()"></i>
        <i class="bi bi-info-circle disabled-icon" 
           title="This function is not implemented"
           data-bs-toggle="tooltip" 
           data-bs-placement="top"></i>
      </div>
    </div>

    <div class="dropdown position-absolute top-0 end-0">
      <button class="btn btn-link dropdown-toggle text-dark" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-three-dots-vertical"></i>
      </button>      
      <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <li><a class="dropdown-item" href="#" (click)="onEdit()">Edit Note</a></li>
        <li><a class="dropdown-item" href="#" (click)="onComplete()">Complete</a></li>
        <li><a class="dropdown-item" href="#" (click)="onDelete()">Delete</a></li>
      </ul>
    </div>
  </div>
</div>
